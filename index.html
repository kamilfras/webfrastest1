<!-- ... reszta kodu ... -->

    <script>
        // Sprawdź, czy użytkownik jest zalogowany
        if (!localStorage.getItem('token')) {
            window.location.href = 'login.html'; // Przekieruj na stronę logowania
        }

        function searchInvoices() {
            const searchQuery = document.getElementById('search').value;
            const token = localStorage.getItem('token');

            // Tutaj powinna być logika wyszukiwania faktur w API KSeF
            // Na przykład:
            fetch(`https://ksef-demo.mf.gov.pl/api/online/Invoice/Get/${searchQuery}`, {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
            .then(response => response.json())
            .then(data => {
                // Wyświetl faktury w tabeli
                const invoiceList = document.getElementById('invoiceList');
                invoiceList.innerHTML = '';
                data.forEach(invoice => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${invoice.KSeFReferenceNumber}</td>
                        <td>${invoice.date}</td>
                        <td>${invoice.amount}</td>
                        <td><button onclick="downloadInvoice('${invoice.KSeFReferenceNumber}')">Pobierz fakturę</button></td>
                    `;
                    invoiceList.appendChild(row);
                });
            })
            .catch(error => {
                console.error('Błąd:', error);
            });
        }

        function downloadInvoice(referenceNumber) {
            // Tutaj powinna być logika pobierania faktury z API KSeF
        }

        function logout() {
            localStorage.removeItem('token');
            window.location.href = 'login.html';
        }
    </script>
</body>
</html>
